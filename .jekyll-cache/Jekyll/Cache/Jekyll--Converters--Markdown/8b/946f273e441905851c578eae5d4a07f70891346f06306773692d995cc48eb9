I"û"<h1 id="å‰è¨€">å‰è¨€</h1>

<p>æœ¬ç¯‡æ˜¯çœ‹åˆ°<code class="language-plaintext highlighter-rouge">mashplant</code>çš„ä¸€ç¯‡çŸ¥ä¹æ–‡ç« https://www.zhihu.com/question/316026652/answer/625315615ï¼Œåœ¨æœ¬æœº<code class="language-plaintext highlighter-rouge">mac</code>ä¸Šè·‘äº†ä¸‹ä»–çš„ä»£ç ä¹‹åå‘ç°å‡ºç°äº†äº›é—®é¢˜ï¼šæœ¬æœºä¸Š<code class="language-plaintext highlighter-rouge">sizeof(string)</code>çš„æ•°å€¼å›ºå®šä¸º24â€¦</p>

<p>è€Œæˆ‘åŸæ¥å¯¹<code class="language-plaintext highlighter-rouge">sizeof</code>ä¾¿ä¸€ç›´ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œæ°å¥½çœ‹åˆ°ä¸€ç¯‡è¿˜ä¸é”™çš„åšå®¢ï¼Œå°±æ®æ­¤æ•´ç†ä¸‹ç›¸å…³çŸ¥è¯†ã€‚</p>

<p>å‚è€ƒåšå®¢ï¼šhttps://www.cnblogs.com/wanghetao/archive/2012/04/04/2431760.html</p>

<h1 id="sizeofä¸sizeofstring">sizeofä¸sizeof(string)</h1>

<p>ç»è¿‡æŸ¥è¯¢èµ„æ–™å¾—çŸ¥ï¼Œ<code class="language-plaintext highlighter-rouge">sizeof(string)</code>è¿”å›çš„æ˜¯<code class="language-plaintext highlighter-rouge">string</code>å¯¹è±¡æ‰€å çš„ç©ºé—´ï¼Œè€Œé<code class="language-plaintext highlighter-rouge">string</code>æ‰€å­˜å‚¨çš„å­—ç¬¦ä¸²çš„å¤§å°ã€‚å…¶å®ç°åœ¨ä¸åŒåº“ä¸­å¯èƒ½ä¸åŒï¼Œä½†æ˜¯åœ¨åŒä¸€åº“ä¸‹ï¼Œæ— è®º<code class="language-plaintext highlighter-rouge">string</code>ä¸­å­˜æ”¾å¤šå°‘å­—ç¬¦ä¸²ï¼Œå…¶<code class="language-plaintext highlighter-rouge">sizeof()</code>éƒ½æ˜¯å›ºå®šçš„ï¼Œ<strong>å­—ç¬¦ä¸²æ‰€å çš„ç©ºé—´æ˜¯ä»æ ˆä¸­åˆ†é…çš„</strong>ï¼ˆæ„Ÿè§‰å’Œ<code class="language-plaintext highlighter-rouge">Rust</code>ä¸­çš„<code class="language-plaintext highlighter-rouge">string</code>å¾ˆåƒ..ï¼‰ï¼Œä¸<code class="language-plaintext highlighter-rouge">sizeof()</code>æ— å…³ã€‚</p>

<p>ç»è¿‡æµ‹è¯•ï¼Œåœ¨æœ¬æœºå¦‚ä¸‹ç‰ˆæœ¬ä¸­ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>g++ <span class="nt">-v</span>
Configured with: <span class="nt">--prefix</span><span class="o">=</span>/Applications/Xcode.app/Contents/Developer/usr <span class="nt">--with-gxx-include-dir</span><span class="o">=</span>/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/c++/4.2.1
Apple clang version 11.0.0 <span class="o">(</span>clang-1100.0.33.8<span class="o">)</span>
Target: x86_64-apple-darwin19.3.0
Thread model: posix
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">sizeof(string)</code>è¾“å‡ºä¸º24ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;cstdio&gt;  
#include &lt;string&gt;
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="k">using</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">;</span>
	<span class="n">string</span> <span class="n">s</span> <span class="o">=</span> <span class="s">"a"</span><span class="p">;</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"size = %lu"</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">s</span><span class="p">));</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h1 id="å…³äºæ›´å¤šsizeofçš„ç”¨æ³•">å…³äºæ›´å¤šsizeofçš„ç”¨æ³•</h1>

<h4 id="1-ä»€ä¹ˆæ˜¯sizeof">1. ä»€ä¹ˆæ˜¯sizeof</h4>

<p><code class="language-plaintext highlighter-rouge">sizeof</code>ä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç½‘ä¸Šæœ‰äººè¯´<code class="language-plaintext highlighter-rouge">sizeof</code>æ˜¯ä¸€å…ƒæ“ä½œç¬¦ï¼Œä½†æ˜¯ä¼¼ä¹<code class="language-plaintext highlighter-rouge">sizeof</code>æ›´åƒä¸€ä¸ªç‰¹æ®Šçš„å®ï¼Œå®ƒæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µæ±‚å€¼çš„ã€‚</p>

<p>ä¸¤ä¸ªæœ‰è¶£çš„case:</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="k">sizeof</span><span class="p">(</span><span class="mi">1</span><span class="o">==</span><span class="mi">2</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>	<span class="c1">//1  </span>
<span class="c1">// ==æ“ä½œç¬¦è¿”å›boolç±»å‹ï¼Œç›¸å½“äºcout &lt;&lt; sizeof(bool) &lt;&lt; endl</span>

<span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>	<span class="c1">//4</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">a</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>				<span class="c1">//0</span>
</code></pre></div></div>

<p>ç”±äº<code class="language-plaintext highlighter-rouge">sizeof</code>å†ç¼–è¯‘é˜¶æ®µå¤„ç†çš„ç‰¹æ€§ã€‚<code class="language-plaintext highlighter-rouge">sizeof</code>ä¸èƒ½è¢«ç¼–è¯‘ä¸ºæœºå™¨ç ï¼Œåœ¨<code class="language-plaintext highlighter-rouge">sizeof</code>ä½œç”¨èŒƒå›´å†…ï¼Œ()å†…éƒ¨çš„å†…å®¹ä¸ä¼šè¢«ç¼–è¯‘ï¼Œè€Œæ˜¯ä¼šè¢«æ›¿æ¢æˆç±»å‹ã€‚<code class="language-plaintext highlighter-rouge">=</code>æ“ä½œç¬¦è¿”å›å·¦æ“ä½œæ•°çš„ç±»å‹ï¼Œæ•…è€Œ<code class="language-plaintext highlighter-rouge">a=3</code>ç›¸å½“äº<code class="language-plaintext highlighter-rouge">int</code>ï¼Œä»£ç è¢«æ›¿æ¢ä¸ºï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">a</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</code></pre></div></div>

<p>äº‹å®ä¸Šï¼Œå“ªæ€•æ˜¯å¦‚ä¸‹çš„ä»£ç ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="s">"hello world!"</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">a</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</code></pre></div></div>

<p>â€¦æ˜¯ä¸èƒ½è·‘é€šçš„ï¼Œä¼šæœ‰è¿™ä¸ªé”™è¯¯ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>a.cpp:6:20: error: assigning to <span class="s1">'int'</span> from incompatible <span class="nb">type</span> <span class="s1">'const char [6]'</span>
</code></pre></div></div>

<p>æ‰€ä»¥å¯èƒ½åªèƒ½é‡Œé¢çš„ç±»å‹èƒ½å¤Ÿè½¬æ¢çš„æ—¶å€™æ‰å¯ä»¥ã€‚ã€‚ã€‚</p>

<h4 id="2-sizeofçš„ç”¨æ³•">2. sizeofçš„ç”¨æ³•</h4>

<p>ä¸¤ç§ï¼š</p>

<ol>
  <li>
    <p>sizeof(object)</p>

    <p>å¯¹äºå¯¹è±¡ä½¿ç”¨<code class="language-plaintext highlighter-rouge">sizeof</code>ï¼Œä¹Ÿå¯ä»¥å†™æˆ<code class="language-plaintext highlighter-rouge">sizeof object</code>å½¢å¼ã€‚</p>
  </li>
  <li>
    <p>sizeof(typename)</p>

    <p>å¯¹äºç±»å‹ä½¿ç”¨<code class="language-plaintext highlighter-rouge">sizeof</code>ï¼Œå¿…é¡»åŠ ()ã€‚</p>
  </li>
</ol>

<p>ä¾‹å¦‚å¦‚ä¸‹ä»£ç ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="k">sizeof</span> <span class="n">a</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>	<span class="c1">//4</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="k">sizeof</span> <span class="mi">2</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>	<span class="c1">//4</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="k">sizeof</span> <span class="kt">int</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>	<span class="c1">// error: expected parentheses around type name in sizeof expression</span>
</code></pre></div></div>

<p>ç»“è®ºï¼šæœ€å¥½éƒ½åŠ <code class="language-plaintext highlighter-rouge">()</code>ã€‚</p>

:ET